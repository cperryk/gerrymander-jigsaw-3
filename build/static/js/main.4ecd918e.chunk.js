(this["webpackJsonpgerrymander-jigsaw-3"]=this["webpackJsonpgerrymander-jigsaw-3"]||[]).push([[0],{141:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(49),l=a.n(s),r=(a(78),a(4)),h=a(8),o=a(9),c=a(11),v=a(10),u=a(2),p=a(12),d=(a(79),a(64)),m=a(5);function g(e){var t=Math.floor(e/6e4);return[t,Math.round((e-60*t*1e3)/1e3)]}function f(e,t){var a=e.width,i=e.height,n=a/i;return n>t?{height:i,width:i*t}:n<t?{height:a/t,width:a}:{width:a,height:i}}var b=a(143),w=a(144),S=a(145),E=a(16),y=function(e){var t=e.title,a=e.subtitle,i=e.shareText,s=e.onRestart,l=function(){var e=Object(d.parse)(window.location.search);return"string"===typeof e.parentUrl?decodeURIComponent(e.parentUrl):window.location.href}();return n.a.createElement("div",{className:"slide"},n.a.createElement("div",null,n.a.createElement("h2",null,t),n.a.createElement("p",{className:"subtitle"},a),n.a.createElement("div",{className:"share-btns"},n.a.createElement(b.a,{className:"puzzle-btn",url:l,quote:i},n.a.createElement(E.a,{color:"rgb(59, 89, 152)"}),n.a.createElement("span",null,"Share")),n.a.createElement(w.a,{className:"puzzle-btn",url:l,title:i},n.a.createElement(E.d,{color:"rgb(64, 153, 255)"}),"Tweet"),n.a.createElement(S.a,{openWindow:!0,className:"puzzle-btn",url:l,subject:i},n.a.createElement(E.c,{color:"rgb(106, 4, 50)"}),"Email")),n.a.createElement("div",{className:"puzzle-btn",onClick:s},n.a.createElement(E.b,null),n.a.createElement("span",null,"Restart"))))},j=a(36),k=a(70),O=a.n(k),x=a(71),z=a.n(x),B=a(35),D=a.n(B),N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(c.a)(this,Object(v.a)(t).call(this,e))).hoverColor=void 0,a.dragColor=void 0,a.state={color:a.props.color,dragging:!1,hovering:!1},a.hoverColor="rgb(100%, 100%, 44.1%)",a.dragColor="yellow",a.handleMouseEnter=a.handleMouseEnter.bind(Object(u.a)(a)),a.handleMouseOut=a.handleMouseOut.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.paths.map((function(t,a){return n.a.createElement("path",{d:t,className:"puzzle-piece-path",fill:e.state.color,key:a,cursor:e.props.locked?"normal":"move"})}));return n.a.createElement(z.a,{scale:this.props.dragScale,onStart:this.handleDragStart.bind(this),onStop:this.handleDragStop.bind(this),disabled:this.props.locked,position:{x:this.props.position[0],y:this.props.position[1]}},n.a.createElement("g",{className:D()({"puzzle-piece-group":!0,dragging:this.state.dragging,hovering:this.state.hovering}),onMouseEnter:this.handleMouseEnter,onMouseOut:this.handleMouseOut},t))}},{key:"handleMouseEnter",value:function(){this.state.dragging||this.setState({hovering:!0})}},{key:"handleMouseOut",value:function(){this.state.dragging||this.setState({hovering:!1})}},{key:"handleDragStart",value:function(){this.setState({dragging:!0}),this.props.onDragStart(this.props.index)}},{key:"handleDragStop",value:function(e,t){this.setState({dragging:!1}),this.props.onDragStop(this.props.index,t)}}]),t}(n.a.PureComponent),T=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(c.a)(this,Object(v.a)(t).call(this,e))).ref=void 0,a.ref=n.a.createRef(),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.paths.map((function(e,t){return n.a.createElement("path",{className:"puzzle-guide-path",d:e,key:t})}));return n.a.createElement("g",{ref:this.ref},e)}},{key:"getBbox",value:function(){var e=this.ref;if("object"===typeof e&&e&&e.current)return e.current.getBoundingClientRect()}}]),t}(n.a.Component),M=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(c.a)(this,Object(v.a)(t).call(this,e))).ref=void 0;var i=O.a.scale("Spectral").domain([0,e.pieces.length],e.pieces.length);return a.state={pieces:e.pieces.map((function(e,t){return{key:e.key,paths:e.paths,originalPosition:e.transform,position:e.transform,color:i(t),guideRef:n.a.createRef(),pieceRef:n.a.createRef()}})),tolerance:30},a.ref=n.a.createRef(),a.handleDragStart=a.handleDragStart.bind(Object(u.a)(a)),a.handleDragStop=a.handleDragStop.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.getDragScale(this.props.width,this.props.height),a=this.state.pieces.map((function(a,i){return n.a.createElement(N,{index:i,paths:a.paths,key:a.key,color:a.color,onDragStart:e.handleDragStart,onDragStop:e.handleDragStop,dragScale:t,ref:a.pieceRef,locked:"end"===e.props.stage,position:a.position})})),i=this.state.pieces.map((function(e,t){return n.a.createElement(T,{paths:e.paths,ref:e.guideRef,key:t})})),s=this.props.devMode?n.a.createElement("rect",{x:this.props.viewBox[0],y:this.props.viewBox[1],width:this.props.viewBox[2],height:this.props.viewBox[3]}):null;return n.a.createElement("div",{className:"puzzle"},n.a.createElement("svg",{width:this.props.width,height:this.props.height,viewBox:this.props.viewBox.join(" "),ref:this.ref},s,i,a))}},{key:"componentDidUpdate",value:function(e){if(e.stage!==this.props.stage)switch(this.props.stage){case"editing":case"initial":this.setState({pieces:this.state.pieces.map((function(e){return e.position=e.originalPosition,e}))});break;case"end":this.setState({pieces:this.state.pieces.map((function(e){return e.position=[0,0],e}))})}}},{key:"getDragScale",value:function(e,t){if("object"===typeof this.ref){var a=this.props.viewBox;return e/t>a[2]/a[3]?t/this.props.viewBox[3]:e/this.props.viewBox[2]}}},{key:"movePieceToFront",value:function(e){e!==this.state.pieces.length-1&&this.setState({pieces:[].concat(Object(j.a)(this.state.pieces.slice(0,e)),Object(j.a)(this.state.pieces.slice(e+1,this.state.pieces.length)),[this.state.pieces[e]])})}},{key:"isPieceSolved",value:function(e){var t=Object(r.a)(this.state.pieces[e].position,2),a=t[0],i=t[1],n=this.state.tolerance;return a>-n&&a<n&&i>-n&&i<n}},{key:"isAllSolved",value:function(){var e=this;return this.state.pieces.forEach((function(t,a){return e.isPieceSolved(a)})),this.state.pieces.every((function(t,a){return e.isPieceSolved(a)}))}},{key:"handleDragStart",value:function(e){this.movePieceToFront(e)}},{key:"handleDragStop",value:function(e,t){this.state.pieces[e].position=[t.x,t.y],this.setState({pieces:Object(j.a)(this.state.pieces)}),this.isAllSolved()&&this.props.onSolved(),this.logPositions()}},{key:"logPositions",value:function(){if(this.props.devMode){var e=this.state.pieces.reduce((function(e,t){var a=t.position;if(a){var i=Object(r.a)(a,2),n=i[0],s=i[1];e[t.key]=[n.toFixed(1),s.toFixed(1)]}return e}),{});console.log(JSON.stringify(e))}}}]),t}(n.a.PureComponent),R=function(e){return n.a.createElement("div",{className:"slide"},n.a.createElement("div",null,n.a.createElement("h2",null,e.title),n.a.createElement("div",{className:"puzzle-btn btn-start",onClick:e.onStart},"Start!")))},C=function(e){var t=e.time;return n.a.createElement("div",{className:"timer"},n.a.createElement("span",{className:"time"},function(e){var t=g(e),a=Object(r.a)(t,2),i=a[0],n=a[1],s=i>=10?"".concat(i):"0".concat(i),l=n>=10?"".concat(n):"0".concat(n);return"".concat(s,":").concat(l)}(t)))},P=a(72),W=a.n(P),V=.5,F=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(c.a)(this,Object(v.a)(t).call(this,e))).interval=void 0;var i={viewBox:[m.viewBox.minX,m.viewBox.minY,m.viewBox.width,m.viewBox.height],pieces:Object.entries(m.paths).map((function(e){var t=Object(r.a)(e,2),a=t[0],i=t[1],n=m.transforms[a]||["0","0"],s=Object(r.a)(n,2),l=s[0],h=s[1];return{key:a,paths:i,transform:[parseFloat(l),parseFloat(h)]}})),title:m.title,shareText:m.shareText},n=i.pieces,s=i.viewBox,l=i.title,o=i.shareText;return a.state={pieces:n,viewBox:s,title:l,shareText:o,startTime:new Date,duration:0,stage:"start",dimensions:{width:window.innerWidth,height:f({width:window.innerWidth,height:window.innerHeight},V).height}},a.handleSolved=a.handleSolved.bind(Object(u.a)(a)),a.handleStart=a.handleStart.bind(Object(u.a)(a)),a.handleRestart=a.handleRestart.bind(Object(u.a)(a)),a.handleTouchStart=a.handleTouchStart.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){switch(this.state.stage){case"start":return n.a.createElement("div",{className:"App"},n.a.createElement(R,{title:this.state.title,onStart:this.handleStart}),n.a.createElement(M,{stage:"initial",pieces:this.state.pieces,viewBox:this.state.viewBox,width:this.state.dimensions.width,height:this.state.dimensions.height,devMode:!1}));case"puzzle":return n.a.createElement("div",{className:"App no-touch-action"},n.a.createElement("div",{className:"top-bar"},n.a.createElement("div",{className:"top-bar-interior"},n.a.createElement(C,{time:this.state.duration}),n.a.createElement("div",{className:"puzzle-btn",onClick:this.handleRestart},n.a.createElement(E.b,null),n.a.createElement("span",null,"Restart")))),n.a.createElement(M,{stage:"editing",onSolved:this.handleSolved,pieces:this.state.pieces,viewBox:this.state.viewBox,width:this.state.dimensions.width,height:this.state.dimensions.height,devMode:!1}));case"end":var e=function(e){var t=g(e),a=Object(r.a)(t,2),i=a[0],n=a[1],s=[];return 1===i?s.push("1 minute"):i>1&&s.push("".concat(i||0," minutes")),1===n?s.push("1 second"):n>1&&s.push("".concat(n||0," seconds")),s.join(", ")}(this.state.duration),t=this.state.shareText.replace("{time}",e);return n.a.createElement("div",{className:"App"},n.a.createElement(y,{title:"Solved!",subtitle:"You solved the puzzle in ".concat(e,"!"),shareText:t,onRestart:this.handleRestart}),n.a.createElement(M,{stage:"end",pieces:this.state.pieces,viewBox:this.state.viewBox,width:this.state.dimensions.width,height:this.state.dimensions.height}))}}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("touchstart",this.handleTouchStart),this.interval=setInterval((function(){return e.incrementTime()}),1e3);var t=new W.a.Child;t.getParentPositionInfo(),t.onMessage("viewport-iframe-position",(function(a){var i=a.split(" "),n=Object(r.a)(i,2),s=n[0],l=n[1];e.setState({dimensions:{width:s,height:f({width:s,height:Number(l)},V).height}}),t.sendHeight()}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("touchstart",this.handleTouchStart),clearInterval(this.interval)}},{key:"incrementTime",value:function(){var e;"puzzle"===this.state.stage&&this.setState({duration:Math.round((e=this.state.startTime,Math.round((new Date).getTime()-e.getTime())))})}},{key:"handleStart",value:function(){this.setState({startTime:new Date,stage:"puzzle"})}},{key:"handleSolved",value:function(){this.setState({stage:"end"})}},{key:"handleRestart",value:function(){this.setState({startTime:new Date,stage:"start",duration:0})}},{key:"handleTouchStart",value:function(e){"puzzle"===this.state.stage&&(e.preventDefault(),e.stopPropagation())}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e){e.exports=JSON.parse('{"transforms":{"WV-01":["-81.3","-166.1"],"WV-03":["172.6","-404.3"],"WV-02":["-33.5","261.7"]},"paths":{"WV-01":["M-7865 3830l-4 3-1 1-2 3-5 2-1 2-3 5-4 4-3 1-4 3v2l-3 1-3 3-2 4-3 5v3l-3 3-2 5 1 1-1 3 4 7-3 3h-1v2l-3 4-2 2-23-15-13-1h-1l-28-6 1-1v-3l-2-3-3-1-1 2h-1l-2 2-1 4-2 6-19 3 3-3v-3l1-1-2-2h-6l-4-5-4-1-2-2-2 1h-6l-15-3-1-1-8-1-4-1-3 1-1 2-3-1-3 2-2 3h-2l1 9 11 10-3 1-1 1h-2v-1l-4 2-15 8-13 8-1-3-3-2-1 1-1-2-1-2 2-1 2-2 1-2v-6l-1-2 1-1-1-2 1-1-2-2h-1v-3l-2 1-5-2-1-2h-4l-1 1-1-1h-5l-2 1-1-2h-2l2-2-1-3h-1l-1-3-1 1-3-3h1v-1l2-2-10 4-3 1-13 9-3 2-16-7v-5l-1-3 3-4 3-1v-3l2-2h7l3 1 2-7 1-2 4-2 5-3h3l2 2 1 3 2 1h3l7-4h5l4-5h1l4-1 3-4 3-3 5-4 9-6 5-1 2-3v-4l3-1v-1l-3-4v-2l4-2v-5l3-2v-2l-1-2 1-1 3 1 1-1-1-3 2-3v-3l1-4v-3l2-2v-4l1-2 4-4v-3l2-3 2-1 1-3 2-2-2-3 1-2-3-3 2-1v-3l2-4-2-3-1-3-4-4v-2l4-2 3-1 2 1 6-2v91h104v19h-1v33h2l4-2 4-4 3-1 1-2 3-1 2 1 1-3 3-1v-2l4-1 2-2h1l3-3 1 1 2-1v-1l1-1v-1l2-2-1-1h2l4-1 1 2 8 3v-3l2-2h2l4-4 2-3 4-1-1-2 2-2h1l-1-2 4-2-1 2h3l1 1-4 1 1 2 2 1 1-1 1 2 4 2 3 1z"],"WV-02":["M-8190 3896h2l3-1 1-2v-2l1-2h2l4 2 2-1-3-3 2-5-5-4 1-3 3 1 3-2 16 7 3-2 13-9 3-1 10-4-2 2v1h-1l3 3 1-1 1 3h1l1 3-2 2h2l1 2 2-1h5l1 1 1-1h4l1 2 5 2 2-1v3h1l2 2-1 1 1 2-1 1 1 2v6l-1 2-2 2-2 1 1 2 1 2 1-1 3 2 1 3 13-8 15-8 4-2v1h2l1-1 3-1-11-10-1-9h2l2-3 3-2 3 1 1-2 3-1 4 1 8 1 1 1 15 3h6l2-1 2 2 4 1 4 5h6l2 2-1 1v3l-3 3 19-3 2-6 1-4 2-2h1l1-2 3 1 2 3v3l-1 1 28 6h1l13 1 23 15 2-2 3-4v-2h1l3-3-4-7 1-3-1-1 2-5 3-3v-3l3-5 2-4 3-3 3-1v-2l4-3 3-1 4-4 3-5 1-2 5-2 2-3 1-1 4-3h3l6 2 4-1 6 1v-3h2l1-1 2 1-4-3 1-2 4 2 1-1-3-2-1-2h1l4 2 1-3 2 1v-2l7 2 2 1 1-2 3-3v-1h2l2-2 8 1 3 2 4 3 2 3 4 1 2-1 2 2v-3l1 1 4 1v-2l5 1 1 1-2 3h-3l-1 1 2 2v2h2l2-1v1l-2 2 5 1 1-1h2l-3 1 2 2-2 1 1 1h-2l1 1 4 1 2 4h-2l1 3-1 2 3 2-2 2-3 6-2 4-1 2-2 4-21-13-12-8-11-7-8-5v4l-1 1 1 3-2 3 3 1-3 3-5 6 2 1-1 1-3 4 3 3-2 1-3 4-2 1-4 2-6 5 2 2-5 5-2-2-2 2-4 4-3 2v-3l-2 1-2 2-3 2-4 5-4 7-13-8-1 2-1 1-1 2-3 1v1l-2 3-2 4 1 2-1 3h-4l-2 5v1l-3 4-2 3-1 3-3 3-5 4-2 1-16-4-5-8-1-2-11-4 3-3-2-1 2-2-2-1 1-1-4-1h-1v2h-2l-2-2-2 1v-3l-2-3h-2l-3 2 1 1-3 7-2 1v2l-1 2-1 3-16 10-9-2-13 9 6-14-10-17-3 1-2-2v-1l-2-2h-7l-2 1-1-1-5 9-15 12-6-1-4 1-1-2-2-1-10 5 6 1 1 2-10 6-32 15-8 8-2 2-5 20-3-1-2 1-2-1v-2l-1-1 1-2-4-4h-1l-3-1v-2l2-2h-3l1-2h-3l-3-2-1-2-4-1-1-2 1-2-4 1-1-1h-3l-1 3-2-1-1-2-2-1v2l-3 1 1 2h-2l-1-4h3l-1-2h1v-5l-1-2-2-1-1 1h-4l-3-1-8 6-2-1-3-2v-4l-1-7-1-20 11-5 18-3-4-3 2-2-11-13v-1z"],"WV-03":["M-8190 3896v1l11 13-2 2 4 3-18 3-11 5 1 20 1 7v4l3 2 2 1 8-6 3 1h4l1-1 2 1 1 2v5h-1l1 2h-3l1 4h2l-1-2 3-1v-2l2 1 1 2 2 1 1-3h3l1 1 4-1-1 2 1 2 4 1 1 2 3 2h3l-1 2h3l-2 2v2l3 1h1l4 4-1 2 1 1v2l2 1 2-1 3 1 5-20 2-2 8-8 32-15 10-6-1-2-6-1 10-5 2 1 1 2 4-1 6 1 15-12 5-9 1 1 2-1h7l2 2v1l2 2 3-1 10 17-6 14 13-9 9 2 16-10 1-3 1-2v-2l2-1 3-7-1-1 3-2h2l2 3v3l2-1 2 2h2v-2h1l4 1-1 1 2 1-2 2 2 1-3 3-2 2-1 5 1 1h-2l-1 3 1 5-2 2-3 4 1 1-2 1h-2l-1 2-2 1-2 2 2 2v2l-2 1-3 2-5 4-2 1v3l-3 2 1 2 1 1-3 2-3 7-2 2-4 4-3 1-7 6-2 1-2 4-3 3-1 1 1 2-3 1-2 3 1 1-4 3 2 4 1 1 4 2-3 3-7 3 1 2-2 1 3 1 2-1-1 3-4 1-3 1v1l-11 5-2-1v-2l-2-3-4 1-5 3-10 5-7 2-1-2-5-3h-2l-1 1-2 3 4 4-6 3-4 2h-3v-1l-6 2-8 1-5 1-6 3-10-6-4-4-1 2h-2l-2 4h-2l-5 2h-1l-1 2-4 1-2 2h-11l-4-2-2-1-1-3-2-1-4-1-1 1-4-1v-2l-2-3-5-3-1-1 1-2-2-5h-2l-3-2v-2h2l5-3h-2v-2h-2l-1-1-3 1-4-1v2l-2-1-1-2h-6l-1-1 2-1-1-2h-2l-1-2h-1v-3h-2l1 2h-2l-1-2-2-2-2 1-4-2v-3h-1l-1-3-2-1 2-2h-2v-1l-5-4h-2l1-1-2-2-1-4-1-1-3-2-1 2-1-3h-1v-2l2-1-1-2 2-1h-2v-1l-3-1-1-2-3-5-3-2v-1l-5-3v-4h2l2-2v-2l-2-2 1-1h2l1-2-1-4 1-1-2-3v-7l2 1h5l12-3h2l4-1h2l2-5 1-8 2-2h9l1-1v-2l-2-6 1-2-1-5-2-1v-3l2-2 3-1 2-2 1-2-1-3 3-4 3-4 3-2 2-3h4l2 3h2l2 1 3 5 1 1-3 2 2 3z"]},"viewBox":{"minX":-8264,"minY":3480,"width":492,"height":824},"title":"How quickly can you put West Virginia back together?","shareText":"I put West Virginia back together in {time}. Can you?"}')},73:function(e,t,a){e.exports=a(141)},78:function(e,t,a){},79:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.4ecd918e.chunk.js.map